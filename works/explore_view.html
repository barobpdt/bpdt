<!DOCTYPE html>
<html>
<head>
	<title>File Explorer</title>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<script src="/js/jquery.js"></script>
	<script src="/js/common.js"></script>
	
	<script src="/js/slick/jquery.event.drag-2.2.js"></script>
	<script src="/js/slick/slick.core.js"></script>
	<script src="/js/slick/slick.grid.js"></script>
	<link rel="stylesheet" href="/js/slick/slick-default-theme.css" type="text/css"/>
	<link rel="stylesheet" href="/js/slick/slick.grid.css" type="text/css"/>
<style>
		/* ì „ì²´ í˜ì´ì§€ ë ˆì´ì•„ì›ƒ */
		html, body {
			height: 100%;
			margin: 0;
			padding: 0;
			font-family: Arial, sans-serif;
			overflow: hidden;
		}
		
		/* ë©”ì¸ ì»¨í…Œì´ë„ˆ */
		.main-container {
			display: flex;
			flex-direction: column;
			height: 100vh;
			width: 100%;
		}
		
		/* íˆ´ë°” ì˜ì—­ */
		.toolbar {
			padding: 10px;
			background: #f8f9fa;
			border-bottom: 1px solid #ddd;
			flex-shrink: 0;
		}
		
		.toolbar button {
			margin-right: 5px;
			padding: 5px 10px;
		}
		
		/* ê²½ë¡œ í‘œì‹œ ì˜ì—­ */
		.path-breadcrumb {
			padding: 10px;
			background: #fff;
			border-bottom: 1px solid #ddd;
			flex-shrink: 0;
			overflow-x: auto;
			white-space: nowrap;
		}
		
		/* ê·¸ë¦¬ë“œ ì»¨í…Œì´ë„ˆ */
		.grid-container {
			flex: 1;
			position: relative;
			overflow: hidden;
			min-height: 0; /* Flexbox ë‚´ì—ì„œ ì˜¤ë²„í”Œë¡œìš°ê°€ ì‘ë™í•˜ë„ë¡ ì„¤ì • */
		}
		
		/* SlickGrid ìŠ¤íƒ€ì¼ */
		.slick-header-column {
			background: #f5f5f5;
			border-right: 1px solid #ddd;
			padding: 8px;
		}
		
		.slick-row {
			border-bottom: 1px solid #eee;
		}
		
		.slick-row:hover {
			background-color: #f0f0f0;
		}
		
		.file-icon {
			width: 16px;
			height: 16px;
			margin-right: 5px;
			vertical-align: middle;
		}
		
		.folder-icon {
			color: #ffd700;
		}
		
		.file-icon {
			color: #666;
		}
		
		/* ë°˜ì‘í˜• ì„¤ì • */
		@media (max-width: 768px) {
			.toolbar button {
				padding: 8px 12px;
				margin-bottom: 5px;
			}
			
			.path-breadcrumb {
				font-size: 14px;
			}
		}
	</style>
</head>
<body>
	<div class="main-container">
		<div class="toolbar">
			<button onclick="navigateUp()">Up</button>
			<button onclick="refreshGrid()">Refresh</button>
			<button onclick="createNewFolder()">New Folder</button>
		</div>
		<div class="path-breadcrumb" id="pathBreadcrumb">
			/root
		</div>
		<div id="grid" class="grid-container"></div>
	</div>
	
	<script>
		// ì „ì—­ ë³€ìˆ˜ ì„ ì–¸
		let currentPath = '/root';
		let grid;
		let data = [];

		// ì»¬ëŸ¼ ì •ì˜
		const columns = [
			{ id: "name", name: "Name", field: "name", sortable: true, width: 300,
			formatter: function(row, cell, value, columnDef, node) {
				const icon = node.type === 'folder' ? 'ğŸ“' : 'ğŸ“„';
			return '<span class="'+node.type+'-icon">'+icon+'</span> '+value
			}
			},
			{ id: "size", name: "Size", field: "size", sortable: true, width: 100 },
			{ id: "modified", name: "Modified", field: "modified", sortable: true, width: 150 },
			{ id: "type", name: "Type", field: "type", sortable: true, width: 100 }
	];

		// ê·¸ë¦¬ë“œ ì˜µì…˜
		
	const options = {
			enableCellNavigation: true,
			enableColumnReorder: false,
			multiColumnSort: false,
			rowHeight: 30,
			headerRowHeight: 40,
			forceFitColumns: true, // ì»¬ëŸ¼ì„ í™”ë©´ í­ì— ë§ì¶¤
			syncColumnCellResize: true,
			enableTextSelectionOnCells: true
		};


		// ê·¸ë¦¬ë“œ ì´ˆê¸°í™” í•¨ìˆ˜
		function initGrid() {
			try {
				// ì´ˆê¸° ë°ì´í„° ì„¤ì •
				data = [
					{ name: "Documents", type: "folder", size: "-", modified: "2024-04-22 10:00" },
					{ name: "Pictures", type: "folder", size: "-", modified: "2024-04-22 09:30" },
					{ name: "report.pdf", type: "file", size: "1.2MB", modified: "2024-04-21 15:45" },
					{ name: "data.xlsx", type: "file", size: "2.5MB", modified: "2024-04-20 11:20" }
				];
				
				// Slick ê°ì²´ê°€ ì •ì˜ë˜ì—ˆëŠ”ì§€ í™•ì¸
				if (typeof Slick === 'undefined') {
					throw new Error("SlickGrid library not loaded properly");
				}
				
				// ê·¸ë¦¬ë“œ ì´ˆê¸°í™”
				grid = new Slick.Grid("#grid", data, columns, options);
				
				// ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ ë“±ë¡
				grid.onDblClick.subscribe(function(e, args) {
					if (args.row >= 0 && args.row < data.length) {
						const item = data[args.row];
						if (item && item.type === 'folder') {
							navigateToFolder(item.name);
						}
					}
				});
				
				// ê·¸ë¦¬ë“œ ë Œë”ë§
				grid.render();
				
				// ì»¬ëŸ¼ ìë™ ì¡°ì •
				grid.autosizeColumns();
				
				console.log("Grid initialized successfully");
			} catch (error) {
				console.error("Error initializing grid:", error);
				alert("Error initializing grid: " + error.message);
			}
		}

		// ë°ì´í„° ë¡œë“œ í•¨ìˆ˜
		function loadData(path) {
			try {
				// This is where you would typically make an API call to get the folder contents
				// For demo purposes, we'll use sample data
				data = [
					{ name: "Documents", type: "folder", size: "-", modified: "2024-04-22 10:00" },
					{ name: "Pictures", type: "folder", size: "-", modified: "2024-04-22 09:30" },
					{ name: "report.pdf", type: "file", size: "1.2MB", modified: "2024-04-21 15:45" },
					{ name: "data.xlsx", type: "file", size: "2.5MB", modified: "2024-04-20 11:20" }
				];
				
				if (grid) {
					grid.setData(data);
					grid.render();
					updateBreadcrumb();
				} else {
					console.error("Grid not initialized");
				}
			} catch (error) {
				console.error("Error loading data:", error);
				alert("Error loading data: " + error.message);
			}
		}

		// í´ë” íƒìƒ‰ í•¨ìˆ˜
		function navigateToFolder(folderName) {
			currentPath = currentPath + '/' + folderName;
			loadData(currentPath);
		}

		// ìƒìœ„ í´ë”ë¡œ ì´ë™ í•¨ìˆ˜
		function navigateUp() {
			if (currentPath !== '/root') {
				currentPath = currentPath.substring(0, currentPath.lastIndexOf('/'));
				loadData(currentPath);
			}
		}

		// ê·¸ë¦¬ë“œ ìƒˆë¡œê³ ì¹¨ í•¨ìˆ˜
		function refreshGrid() {
			loadData(currentPath);
		}

		// ìƒˆ í´ë” ìƒì„± í•¨ìˆ˜
		function createNewFolder() {
			const folderName = prompt("Enter folder name:");
			if (folderName) {
				// Here you would typically make an API call to create the folder
				alert(`Folder "${folderName}" would be created here`);
			}
		}

		// ê²½ë¡œ í‘œì‹œ ì—…ë°ì´íŠ¸ í•¨ìˆ˜
		function updateBreadcrumb() {
			const parts = currentPath.split('/').filter(p => p);
			let html = '<span style="cursor: pointer" onclick="navigateToRoot()">/root</span>';
			let path = '';
			
			parts.forEach(part => {
				path += '/' + part;
				html += ` / <span style="cursor: pointer" onclick="navigateToPath('${path}')">${part}</span>`;
			});
			
			document.getElementById('pathBreadcrumb').innerHTML = html;
		}

		// ë£¨íŠ¸ í´ë”ë¡œ ì´ë™ í•¨ìˆ˜
		function navigateToRoot() {
			currentPath = '/root';
			loadData(currentPath);
		}

		// íŠ¹ì • ê²½ë¡œë¡œ ì´ë™ í•¨ìˆ˜
		function navigateToPath(path) {
			currentPath = path;
			loadData(currentPath);
		}

		// í˜ì´ì§€ ë¡œë“œ ì‹œ ì´ˆê¸°í™”
		$(document).ready(function() {
			try {
				// SlickGrid ë¼ì´ë¸ŒëŸ¬ë¦¬ê°€ ë¡œë“œë˜ì—ˆëŠ”ì§€ í™•ì¸
				if (typeof Slick === 'undefined') {
					console.error("SlickGrid library not loaded. Waiting for it to load...");
					// ë¼ì´ë¸ŒëŸ¬ë¦¬ê°€ ë¡œë“œë  ë•Œê¹Œì§€ ëŒ€ê¸°
					setTimeout(function() {
						if (typeof Slick !== 'undefined') {
							initGrid();
							loadData(currentPath);
						} else {
							alert("Failed to load SlickGrid library. Please check your internet connection and try again.");
						}
					}, 1000);
				} else {
					initGrid();
					loadData(currentPath);
				}
			} catch (error) {
				console.error("Error during initialization:", error);
				alert("Error during initialization: " + error.message);
			}
		});
	</script>
</body>
</html> 